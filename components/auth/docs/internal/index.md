# Сервис регистрации/авторизации

# Сервер

## Обработка ошибок

Если возникает ошибка PostgreSQL, то сервис прекращает свою работу, так как нормальным способом обработать эту ситуацию
не представляется возможным. Клиент должен сам или опосредованно через service mesh повторить запрос, тем самым возможно
восстановление после некоторых ошибок (например, временная недоступность PostgreSQL).

## Масштабирование

Stateless сервис. Может запускаться в нескольких экземплярах. Основная точка отказа — база данных. Однако из-за
использования JWT токенов нагрузка на нее не должна быть очень большой - только при первом входе и при потере refresh
токена.

## Критичность

Если сервис будет недоступен, то новые пользователи не смогут пройти регистрацию. Текущие пользователи не заметят
проблему, так как в дальнейшем используются JWT токены. Также будут проблемы у тех, у которых истек refresh токен, но
для этого надо не заходить в игру больше месяца.

## Уязвимость к DDOS

Так как запрос на создание пользователя отделен от авторизации во внешних системах (из-за наличия Cookie), то можно
создать большое количество записей в базе данных вызовом gRPC метода. Также можно вызвать большую нагрузку на базу
используя api для авторизации пользователей. Каждый такой запрос приводить к select запросу.

### Решение

Отключать возможность анонимной регистрации при возникновении DDOS атаки.

# Тестовый клиент

- пароль для android keypass - 123123
- в коде клиента необходимо поменять ip адрес auth сервера

