# Тестирование

Так как основной принцип разработки - минимальное количество разработчиков, то основное направление - автоматические
тесты. Их должно быть ровно столько, чтобы любой код, которые их прошел, можно было бы отправить на prod без ручной
проверки и спокойно уйти спать :-)

## Виды тестов

### Unit тестирование серверов

Данные тесты основные. Проверяем правильность конкретных изолированных участков кода. В идеале разработка должна быть
через тестирование, вначале тест - потом код.

- пользуемся тем что дает платформа
- должны быть по-возможности быстрыми
- не должно быть случайных падений

### Интеграционные тесты серверов

- используем для проверки правильности взаимодействия сервиса с внешними системаи
- используем реальные базы данных (через docker)
- используем mock внешних сервисов

### E2E тесты с полным развертываем сервера и клиента.

- проверяем только базовые сценарии, не проверяем, то что проверено Unit тестом или интеграционным;
- проверяем работу хостинга, что все сервисы запущены, порты открыты, но не проверяем каждый метод сервиса, для этого
  есть тесты на сервере;
- проверяем клиентский код, так как в основном данный код это вызов серверных методов;
- для Relay есть отдельные Unit тесты для проверки FFI взаимодействия.

### Технология

- собираем docker images для всех компонентов
- запускаем сервер через helm на kubernetes в digital ocean
- запускаем Unity с проектом clients/Unity и в ней запускаем интеграционные тесты
- все это выполняется автоматически .github/workflows/test.integration.yml

### Платформы

Идеально - если получиться запускать тесты на Windows, Linux и Android. А в последствии и на MacOs.