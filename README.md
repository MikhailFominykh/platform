# Relay Realtime Game Server

## Сущности
### Комната
- Совокупность клиентов и игровых объектов для организации сессионого взаимодействия (битвы)
- Обладает ограниченным временем жизни
### Клиент
### Игровой объект
- Абстракция для объедения данных, команд и групп доступа.
- У объекта есть владелец - либо клиент, либо root
- При удалении владельца - объект удаляется из комнаты 
   

 
## Игровой объект
### Идентификатор объекта
Для адресации объектов используется u64 идентификатор.
Идентификатор составной - userId:localGameObjectId
- userId:u16 - идентификатор пользователя владельца, 0 для root объектов, 1 для текущего клиента
- localGameObjectId:u32 - локальный идентификатор объекта, за его инкремент отвечает клиент

### Данные объектов
#### Адресация полей
Для адресации полей используется u16, идентификаторы полей уникальные в рамках типа поля.
#### Типы данных
- i64 переменная (с поддержкой инкремента)
- f64 переменная (с поддержкой инкремента)
- структуры (полное обновление)
### Группы доступа
- Игровые объекты и клиенты находятся в группах доступа. 
- Каждая группа доступа имеет идентификатор из диапазона 0-63.
- Клиент может изменять только те объекты, в группах которых он находится.
- Также изменения объекта рассылается всем клиентам, у которых с объектом есть общие группы. 
### События
- структура с идентификатором, которую можно послать определенному объекту. События не сохраняются на объекте. 


# Режим разработчика
## Запуск сервера
- точка входа Server/src/main.rs

## UnityPackage
- clients/Unity/Packages/CheetahRelay
- clients/Unity/Packages/MessagePack
## Сервер в режиме автосоздания комнат и пользователей
- все пользователи при создании размещаются во всех возможных группах

## Примеры использования
- clients/Unity/Packages/CheetahRelay/Tests/Runtime/Client
